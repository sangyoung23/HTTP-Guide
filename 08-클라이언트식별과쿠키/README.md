# HTTP

## 8장 클라이언트 식별과 쿠키

서버입장에서 클라이언트를 알기 위해서는 Header를 봐야한다.

- From : 사용자의 이메일 주소
- User-Agent : 사용자의 브라우저
- Referer : 사용자가 현재 링크를 타고 온 근원 페이지
- Authorization : 사용자의 이름과 비밀번호
- Client-ip : 클라이언트 IP 주소
- X-Forwarded-For : 클라이언트의 IP 주소
- Cookie : 서버가 생성한 ID Label

### 쿠키

- 세션 쿠키(session cookie): 사용자가 사이트를 탐색할 때, 관련한 설정을 저장하는 임시 쿠키, 브라우저를 닫으면 삭제됨
- 지속 쿠키(persistent cookie): 지속 쿠키는 세션과는 다르게, 컴퓨너를 재시작해도 유지함

쿠키는 일종의 클라이언트의 상태를 관리하는 것

브라우저는 수천 수백개의 쿠키를 가질 수 있지만, 브라우저가 쿠키 전부를 모든 사이트에 보내지는 않는다.

보통 2 ~ 3개의 쿠키만 보내는데

- 쿠키를 모두 전달하면 성능이 저하
- 쿠키는 대부분 key/value로 저장되어 있기 때문에, 대부분 사이트에서는 인식하지 않는 무의미한 값
- 잠재적인 개인정보 문제를 야기

### Set-Cookie 헤더 속성

| Set-Cookie 속성 | 설명과 사용방법                                                                                                                                                               |
| --------------- | ----------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Expires         | (선택 속성) 쿠키의 생명주기를 나타내는 날짜 문자열을 기술한다. [요일, DD-MM-YY, HH:MM:SS GMT]                                                                                 |
| Domain          | (선택 속성) 이 속성에 기술된 도메인을 사용하는 서버 호스트명만 쿠키를 전송한다. [com, edu, net, org, mill ...] 도메인이 명시되지 않아있다면, 서버의 호스트명을 Default로 사용 |
| Path            | (선택 속성) 서버에 있는 특정 경로에만 쿠키를 할당                                                                                                                             |
| Secure          | (선택 속성) 이 속성이 포함되어 있으면 HTTPS 연결을 사용할 때만 쿠키를 전송                                                                                                    |

### Set-Cookie2 헤더 속성

| Set-Cookie2 속성 | 설명과 사용방법                                                                       |
| ---------------- | ------------------------------------------------------------------------------------- |
| Version          | (필수 속성) 쿠키 명세의 버젼을 가리키는 정수값이다 [Version="1";]                     |
| Comment          | (선택 속성) 서버가 쿠키를 사용하려는 의도를 기술한다                                  |
| CommentURL       | (선택 속성) 서버가 쿠키를 사용하려는 목적과 정책에 대해 기술된 웹페이지 링크          |
| Discard          | (선택 속성) 클라이언트 프로그램이 종료될 때 쿠키를 삭제하라는 헤더                    |
| Domain           | (Set-Cookie와 동일)                                                                   |
| Max-Age          | (선택 속성) Expires와 목적은 유사하나, 실제 쿠키의 생명주기를 초 단위로 산정한 정수값 |
| Path             | (Set-Cookie와 동일)                                                                   |
| Port             | (선택 속성) 특정 Port에 해당하는 서버로만 쿠키를 전달                                 |
| Secure           | (Set-Cookie와 동일)                                                                   |
