### HTTP

## 7장 Cache

### 캐시(Cache)의 정의

- 캐시의 사전적 정의는 숨겨진 물건의 저장 공간 또는 그 공간 자체를 지칭한다.
- 컴퓨터 분야에서는 데이터나 정보를 빠르게 액세스 할 수 있도록 일시적으로 저장하는 메모리나 저장 공간을 말한다.
- HTTP 캐시란?
  - 웹사이트나 앱의 클라이언트가 이용하는 서비스 과정에서 이미지, HTML, 파일과 같이 재사용 할 수 있는 HTTP Resource들을 임시로 보관되는 저장 공간이다.
- 캐시 : 임시로 재사용할 내용을 저장한 공간

> HTTP Resource
>
> 웹 페이지, 영상, 음성, 이미지, HTML, JS 등

### HTTP 캐시의 개념

- 클라이언트가 서버에 요청하고 서버는 응답하는게 웹의 본질 이다.
- 클라이언트가 매번 똑같은 내용을 서버에 요청을 한다면, 서버는 매번 똑같은 응답을 해주어야한다. 이런 상황에서 캐시를 사용한다.

### 캐시는 어디에 있는가?

- 캐시는 웹 브라우저, 웹 서버(프록시 서버, CDN)에 위치한다.
- 위치에 따라 캐시의 역할이 달라진다.

> 캐싱이란?
>
> 데이터나 계산 결과를 캐시에 저장하는 행위를 말한다. 캐싱은 주로 데이터를 반복적으로 가져오거나 계산하는 작업을 최소화하고 성능을 향상시키기 위해 사용된다.

### Cache의 이점

- 성능 향상
  - 가장 큰 이점 중 하나인 성능 향상, 캐시를 사용하면 이전에 액세스한 데이터나 계산 결과를 빠르게 반환할 수 있어서 원본 데이터나 계산에 비해 빠른 응답 속도로 제공한다.
- 네트워크 트래픽 감소
  - 반복적으로 동일한 데이터를 서버에서 불러오지 않고 캐시에서 가져오면, 네트워크 트래픽(서버를 통해 최종 사용자에게 전달된 데이터의 양)이 감소한다.
- 서버 부하 감소
  - 캐시를 사용하면 클라이언트가 요청한 데이터를 서버에서 반복적으로 계산하거나 불러오는 부하를 감소시킨다.
- 응답 속도 향상
  - 클라이언트가 캐시에서 데이터를 가져오면 원본 데이터를 서버에서 받아오는 것보다 훨씬 빠른 응답을 받을 수 있다.
- 비용 절감
  - 네트워크 트래픽 및 서버 부하의 감소로 인해 비용이 절감된다. 빠른 응답과 효율적인 자원 활용은 비즈니스에 소요되는 운영 비용을 줄일 수 있다.
- 사용자 경험 향상(UX)
  - 빠른 응답 속도와 원활한 데이터 로딩은 사용자 경험을 향상시킨다.

### 캐시 처리 단계

1. 요청 받기 : 네트워크로부터 받은 요청 메세지를 읽는다.
2. 파싱 : 캐시는 메세지를 파싱하여 URL과 헤더들을 추출한다.
3. 검색 : 캐시는 로컬 복사본이 있는지 검사하고, 없다면 가져온다.
4. 신선도 검사 : 캐시된 사본이 신선한지 물어보고, 아니라면 변경사항을 서버에게 물어본다.
5. 응답 생성 : 캐시는 새로운 헤더와 캐시된 본문으로 응답메세지를 받는다.
6. 발송 : 네트워크를 통해 응답을 클라이언트에게 돌려준다.
7. 로깅 : 선택적으로, 이러한 트랜잭션 과정을 로그로 남긴다.

### 어떻게 사본을 신선하게 유지할 수 있는지

- 문서 만료시간 정의 : Expires 헤더와 Cache-Control 이라는 특별한 헤더를 사용한다.
  - Cache-Control: max-age=22 이런식으로 캐시에 만료 날짜를 명시한다.
  - Expires 라는 절대 유효기간을 명시한다.
- 서버 재검사
  - 캐시된 문서가 만료되었음을 서버에게 물어보는 것
  - 검사 결과 콘텐츠가 변경되었으면 서버로부터 가져오는 된다.
  - 콘텐츠 변경이 없다면 새 만료일을 포함한 새로운 헤더만 가져오면 됨
-
